{"ast":null,"code":"import React,{useEffect,useState}from'react';import{ChatState}from'../context/chatProvider';import{Box,Button,Stack,Text,useToast}from'@chakra-ui/react';import axios from'axios';import{AddIcon}from'@chakra-ui/icons';import ChatLoading from'./ChatLoading';import{getSender}from'../config/ChatLogics';import GroupChatModal from'./miscellaneous/GroupChatModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyChats=_ref=>{let{fetchAgain,setFetchAgain}=_ref;const[loggedUser,setLoggedUser]=useState();const{selectedChat,setSelectedChat,user,chats,setChats}=ChatState();const toast=useToast();const fetchChats=async()=>{try{const config={headers:{Authorization:\"Bearer \".concat(user.token)}};const{data}=await axios.get(\"/api/chat\",config);setChats(data);}catch(error){toast({title:\"Error Occured!\",description:\"Failed to load the chats\",status:\"error\",duration:5000,isClosable:true,position:\"bottom-left\"});return;}};useEffect(()=>{setLoggedUser(JSON.parse(localStorage.getItem(\"userInfo\")));fetchChats();},[fetchAgain]);return/*#__PURE__*/_jsxs(Box,{display:{base:selectedChat?\"none\":\"flex\",md:\"flex\"},flexDir:\"column\",alignItems:\"center\",p:3,bg:\"white\",w:{base:\"100%\",md:\"31%\"},borderRadius:\"lg\",borderWidth:\"1px\",children:[/*#__PURE__*/_jsxs(Box,{pb:3,px:3,fontSize:{base:\"28px\",md:\"30px\"},fontFamily:\"Work sans\",display:\"flex\",w:\"100%\",justifyContent:\"space-between\",alignItems:\"center\",children:[\"My Chats\",/*#__PURE__*/_jsx(GroupChatModal,{children:/*#__PURE__*/_jsx(Button,{display:\"flex\",fontSize:{base:\"17px\",md:\"10px\",lg:\"17px\"},rightIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"New Group Chat\"})})]}),/*#__PURE__*/_jsx(Box,{display:\"flex\",flexDir:\"column\",p:3,bg:\"#F8F8F8\",w:\"100%\",h:\"100%\",borderRadius:\"lg\",overflowY:\"hidden\",children:chats?/*#__PURE__*/_jsx(Stack,{overflowY:\"scroll\",children:chats.map(chat=>/*#__PURE__*/_jsx(Box,{onClick:()=>setSelectedChat(chat),cursor:\"pointer\",bg:selectedChat===chat?\"#38B2AC\":\"#E8E8E8\",color:selectedChat===chat?\"white\":\"black\",px:3,py:2,borderRadius:\"lg\",children:/*#__PURE__*/_jsx(Text,{children:!chat.isGroupChat&&loggedUser&&chat.users?getSender(loggedUser,chat.users):chat.chatName})},chat._id))}):/*#__PURE__*/_jsx(ChatLoading,{})})]});};export default MyChats;","map":{"version":3,"names":["React","useEffect","useState","ChatState","Box","Button","Stack","Text","useToast","axios","AddIcon","ChatLoading","getSender","GroupChatModal","jsx","_jsx","jsxs","_jsxs","MyChats","_ref","fetchAgain","setFetchAgain","loggedUser","setLoggedUser","selectedChat","setSelectedChat","user","chats","setChats","toast","fetchChats","config","headers","Authorization","concat","token","data","get","error","title","description","status","duration","isClosable","position","JSON","parse","localStorage","getItem","display","base","md","flexDir","alignItems","p","bg","w","borderRadius","borderWidth","children","pb","px","fontSize","fontFamily","justifyContent","lg","rightIcon","h","overflowY","map","chat","onClick","cursor","color","py","isGroupChat","users","chatName","_id"],"sources":["C:/Users/nikit/MearnChatApp/frontend/src/components/MyChats.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {ChatState} from '../context/chatProvider';\r\nimport {Box, Button, Stack, Text, useToast} from '@chakra-ui/react';\r\nimport axios from 'axios';\r\nimport {AddIcon} from '@chakra-ui/icons';\r\nimport ChatLoading from './ChatLoading'\r\nimport {getSender} from '../config/ChatLogics';\r\nimport GroupChatModal from './miscellaneous/GroupChatModal';\r\n\r\nconst MyChats = ({fetchAgain, setFetchAgain}) => {\r\n\r\n    const [loggedUser, setLoggedUser] = useState()\r\n    const {selectedChat, setSelectedChat, user, chats, setChats} = ChatState();\r\n\r\n    const toast = useToast();\r\n\r\n    const fetchChats = async () => {\r\n        try {\r\n            const config = {\r\n                headers: {\r\n                    Authorization: `Bearer ${user.token}`,\r\n                },\r\n            }\r\n\r\n            const {data} = await axios.get(\"/api/chat\",config);\r\n            setChats(data)\r\n\r\n        } catch (error) {\r\n            toast({\r\n                title:\"Error Occured!\",\r\n                description:\"Failed to load the chats\",\r\n                status:\"error\",\r\n                duration:5000,\r\n                isClosable:true,\r\n                position: \"bottom-left\"\r\n            });\r\n            return\r\n        }\r\n    }\r\n\r\n    useEffect (()=>{\r\n        setLoggedUser(JSON.parse(localStorage.getItem(\"userInfo\")))\r\n        fetchChats()\r\n    },[fetchAgain])\r\n\r\n    return (\r\n\r\n        <Box\r\n            display={{ base: selectedChat ? \"none\" : \"flex\", md: \"flex\" }}\r\n            flexDir=\"column\"\r\n            alignItems=\"center\"\r\n            p={3}\r\n            bg=\"white\"\r\n            w={{ base: \"100%\", md: \"31%\" }}\r\n            borderRadius=\"lg\"\r\n            borderWidth=\"1px\"\r\n            >\r\n            <Box\r\n                pb={3}\r\n                px={3}\r\n                fontSize={{ base: \"28px\", md: \"30px\" }}\r\n                fontFamily=\"Work sans\"\r\n                display=\"flex\"\r\n                w=\"100%\"\r\n                justifyContent=\"space-between\"\r\n                alignItems=\"center\"\r\n            >\r\n                My Chats\r\n                <GroupChatModal>\r\n                    <Button\r\n                        display=\"flex\"\r\n                        fontSize={{ base:\"17px\", md: \"10px\", lg:\"17px\" }}\r\n                        rightIcon={<AddIcon />}\r\n                    >\r\n                        New Group Chat\r\n                    </Button>\r\n                </GroupChatModal>\r\n            </Box>\r\n            <Box\r\n                display=\"flex\"\r\n                flexDir=\"column\"\r\n                p={3}\r\n                bg=\"#F8F8F8\"\r\n                w=\"100%\"\r\n                h=\"100%\"\r\n                borderRadius=\"lg\"\r\n                overflowY=\"hidden\"\r\n            >\r\n                {chats? (\r\n                    <Stack overflowY=\"scroll\" >\r\n                        {chats.map((chat)=> (\r\n\r\n                            <Box key={chat._id}\r\n                                onClick={()=> setSelectedChat(chat)}\r\n                                cursor=\"pointer\"\r\n                                bg={selectedChat === chat? \"#38B2AC\" : \"#E8E8E8\"}\r\n                                color={selectedChat === chat? \"white\" : \"black\"}\r\n                                px={3}\r\n                                py={2}\r\n                                borderRadius=\"lg\"\r\n                            >\r\n                                <Text>\r\n                                    {(!chat.isGroupChat && loggedUser && chat.users) ? (\r\n                                        getSender(loggedUser,chat.users)\r\n                                    ): chat.chatName }\r\n                                </Text>\r\n                            </Box>\r\n                        ))}\r\n                    </Stack>\r\n                ) : (\r\n                    <ChatLoading />\r\n                )\r\n            }\r\n            </Box>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default MyChats;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,OAAQC,SAAS,KAAO,yBAAyB,CACjD,OAAQC,GAAG,CAAEC,MAAM,CAAEC,KAAK,CAAEC,IAAI,CAAEC,QAAQ,KAAO,kBAAkB,CACnE,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAAQC,OAAO,KAAO,kBAAkB,CACxC,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,OAAQC,SAAS,KAAO,sBAAsB,CAC9C,MAAO,CAAAC,cAAc,KAAM,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5D,KAAM,CAAAC,OAAO,CAAGC,IAAA,EAAiC,IAAhC,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAAF,IAAA,CAExC,KAAM,CAACG,UAAU,CAAEC,aAAa,CAAC,CAAGrB,QAAQ,CAAC,CAAC,CAC9C,KAAM,CAACsB,YAAY,CAAEC,eAAe,CAAEC,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAC,CAAGzB,SAAS,CAAC,CAAC,CAE1E,KAAM,CAAA0B,KAAK,CAAGrB,QAAQ,CAAC,CAAC,CAExB,KAAM,CAAAsB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACA,KAAM,CAAAC,MAAM,CAAG,CACXC,OAAO,CAAE,CACLC,aAAa,WAAAC,MAAA,CAAYR,IAAI,CAACS,KAAK,CACvC,CACJ,CAAC,CAED,KAAM,CAACC,IAAI,CAAC,CAAG,KAAM,CAAA3B,KAAK,CAAC4B,GAAG,CAAC,WAAW,CAACN,MAAM,CAAC,CAClDH,QAAQ,CAACQ,IAAI,CAAC,CAElB,CAAE,MAAOE,KAAK,CAAE,CACZT,KAAK,CAAC,CACFU,KAAK,CAAC,gBAAgB,CACtBC,WAAW,CAAC,0BAA0B,CACtCC,MAAM,CAAC,OAAO,CACdC,QAAQ,CAAC,IAAI,CACbC,UAAU,CAAC,IAAI,CACfC,QAAQ,CAAE,aACd,CAAC,CAAC,CACF,OACJ,CACJ,CAAC,CAED3C,SAAS,CAAE,IAAI,CACXsB,aAAa,CAACsB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAC3DlB,UAAU,CAAC,CAAC,CAChB,CAAC,CAAC,CAACV,UAAU,CAAC,CAAC,CAEf,mBAEIH,KAAA,CAACb,GAAG,EACA6C,OAAO,CAAE,CAAEC,IAAI,CAAE1B,YAAY,CAAG,MAAM,CAAG,MAAM,CAAE2B,EAAE,CAAE,MAAO,CAAE,CAC9DC,OAAO,CAAC,QAAQ,CAChBC,UAAU,CAAC,QAAQ,CACnBC,CAAC,CAAE,CAAE,CACLC,EAAE,CAAC,OAAO,CACVC,CAAC,CAAE,CAAEN,IAAI,CAAE,MAAM,CAAEC,EAAE,CAAE,KAAM,CAAE,CAC/BM,YAAY,CAAC,IAAI,CACjBC,WAAW,CAAC,KAAK,CAAAC,QAAA,eAEjB1C,KAAA,CAACb,GAAG,EACAwD,EAAE,CAAE,CAAE,CACNC,EAAE,CAAE,CAAE,CACNC,QAAQ,CAAE,CAAEZ,IAAI,CAAE,MAAM,CAAEC,EAAE,CAAE,MAAO,CAAE,CACvCY,UAAU,CAAC,WAAW,CACtBd,OAAO,CAAC,MAAM,CACdO,CAAC,CAAC,MAAM,CACRQ,cAAc,CAAC,eAAe,CAC9BX,UAAU,CAAC,QAAQ,CAAAM,QAAA,EACtB,UAEG,cAAA5C,IAAA,CAACF,cAAc,EAAA8C,QAAA,cACX5C,IAAA,CAACV,MAAM,EACH4C,OAAO,CAAC,MAAM,CACda,QAAQ,CAAE,CAAEZ,IAAI,CAAC,MAAM,CAAEC,EAAE,CAAE,MAAM,CAAEc,EAAE,CAAC,MAAO,CAAE,CACjDC,SAAS,cAAEnD,IAAA,CAACL,OAAO,GAAE,CAAE,CAAAiD,QAAA,CAC1B,gBAED,CAAQ,CAAC,CACG,CAAC,EAChB,CAAC,cACN5C,IAAA,CAACX,GAAG,EACA6C,OAAO,CAAC,MAAM,CACdG,OAAO,CAAC,QAAQ,CAChBE,CAAC,CAAE,CAAE,CACLC,EAAE,CAAC,SAAS,CACZC,CAAC,CAAC,MAAM,CACRW,CAAC,CAAC,MAAM,CACRV,YAAY,CAAC,IAAI,CACjBW,SAAS,CAAC,QAAQ,CAAAT,QAAA,CAEjBhC,KAAK,cACFZ,IAAA,CAACT,KAAK,EAAC8D,SAAS,CAAC,QAAQ,CAAAT,QAAA,CACpBhC,KAAK,CAAC0C,GAAG,CAAEC,IAAI,eAEZvD,IAAA,CAACX,GAAG,EACAmE,OAAO,CAAEA,CAAA,GAAK9C,eAAe,CAAC6C,IAAI,CAAE,CACpCE,MAAM,CAAC,SAAS,CAChBjB,EAAE,CAAE/B,YAAY,GAAK8C,IAAI,CAAE,SAAS,CAAG,SAAU,CACjDG,KAAK,CAAEjD,YAAY,GAAK8C,IAAI,CAAE,OAAO,CAAG,OAAQ,CAChDT,EAAE,CAAE,CAAE,CACNa,EAAE,CAAE,CAAE,CACNjB,YAAY,CAAC,IAAI,CAAAE,QAAA,cAEjB5C,IAAA,CAACR,IAAI,EAAAoD,QAAA,CACC,CAACW,IAAI,CAACK,WAAW,EAAIrD,UAAU,EAAIgD,IAAI,CAACM,KAAK,CAC3ChE,SAAS,CAACU,UAAU,CAACgD,IAAI,CAACM,KAAK,CAAC,CACjCN,IAAI,CAACO,QAAQ,CACd,CAAC,EAbDP,IAAI,CAACQ,GAcV,CACR,CAAC,CACC,CAAC,cAER/D,IAAA,CAACJ,WAAW,GAAE,CACjB,CAEA,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAO,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}